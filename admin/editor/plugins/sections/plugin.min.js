tinymce.PluginManager.add("sections", function(editor, url){
	
	editor.addButton("sections", {
		title: "Insert a Section",
		icon: true,
		image: url+"/icon.png",
		context: "insert",
		onclick:function(){
			editor.windowManager.open({
				title: "Insert a Section",
				url: url+"/dialog.php",
				width: 400,
				height: 200,
				buttons: [
					{
						text: "Insert Section",
						onclick:function(){
							var win = editor.windowManager.getWindows()[0];
							var content = editor.getContent({format: 'raw'});
							var snippet = win.getContentWindow().document.getElementById("snippet").value;
							content = content + snippet;
							editor.setContent( content, {format: 'raw'} );
							win.close()
						}
					},
					{
						text: "Close",
						onclick: "close"
					}
				]
			})
		}
	}),
	
	editor.addMenuItem("sections", {
		text: "Insert a Section",
		icon: true,
		image: url+"/icon.png",
		context: "insert",
		onclick:function(){
			editor.windowManager.open({
				title: "Insert a Section",
				url: url+"/dialog.php",
				width: 400,
				height: 200,
				buttons: [
					{
						text: "Insert Section",
						onclick:function(){
							var win = editor.windowManager.getWindows()[0];
							var content = editor.getContent({format: 'raw'});
							var snippet = win.getContentWindow().document.getElementById("snippet").value;
							content = content + snippet;
							editor.setContent( content, {format: 'raw'} );
							win.close()
						}
					},
					{
						text: "Close",
						onclick: "close"
					}
				]
			})
		}
	})
	
});